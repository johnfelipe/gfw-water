# Basic Authentication, .htpasswd file is dynamically created - npm script dist-www creates it using the HTPASSWD env variable
AuthType Basic
AuthName "Authentiation Required"
AuthUserFile "/app/.htpasswd"
Require valid-user

# Enable Compression
SetOutputFilter DEFLATE

# Set Cache-Control to 2 weeks for most resources, 3 months for images, and 60 seconds after access for html
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault M1209600
  ExpiresByType text/html A60
  ExpiresByType image/gif A8035200
  ExpiresByType image/jpeg A8035200
  ExpiresByType image/png A8035200
  ExpiresByType text/css M1209600
  ExpiresByType text/javascript M1209600
  ExpiresByType application/x-javascript M1209600
</IfModule>

# Testing browser detection from .htaccess files with no PHP, may need to be adjusted or replaced if this is not sufficient
# Browser sniffing is probably not the ideal way to go
# Still needs IE regex placed in
# Chrome 50+
# Safari > 7
# Firefox greater than 45
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{HTTP_USER_AGENT} !Chrome\/([5-9]\d)
  RewriteCond %{HTTP_USER_AGENT} !Version\/[7-9][^\s]* Safari
  RewriteCond %{HTTP_USER_AGENT} !Firefox\/([4-9][5-9]|[5-9]\d)
  RewriteCond %{REQUEST_URI} !unsupported/
  RewriteRule (.*).html unsupported [L]
</IfModule>
